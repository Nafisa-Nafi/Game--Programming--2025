<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Scribble</title>
    <style>
        body {
            font-family: Arial;
            margin: 10px
        }

        #panel {
            border: 1px solid #333;
            padding: 8px 10px;
            max-width: 520px;
            margin-bottom: 8px
        }

        .c {
            width: 95vw;
            height: 60vh;
            border: 1px dashed #999;
            display: block
        }

        .meta {
            font-size: 12px;
            color: #444
        }
    </style>
</head>

<body>
    <h2>Scribble â€” 5-minute play</h2>

    <div id="panel">
        <div class="meta">Time left: <span id="timer">05:00</span> | Step <span id="step">1</span>/5</div>
        <p id="instruction"><strong>Make one continuous line for 20 seconds.</strong></p>
        <div class="meta">New prompt every minute. </div>
    </div>

    <p>Thickness <input id="size" type="range" min="2" max="18" value="8">
        <button id="clear">Clear</button>
        <button id="save">Save PNG</button>
    </p>

    <canvas id="pad" class="c"></canvas>

    <script>
        // timer + prompts
        const prompts = [
            "Make one continuous line for 20 seconds.",
            "Draw 5 fast shapes without lifting the pen.",
            "Scribble a storm cloud, then a calm wave.",
            "Write an encouraging word big and bold.",
            "Circle your favorite mark 3 times."
        ];
        let seconds = 300, minuteIndex = 0;
        const instruction = document.getElementById('instruction');
        const stepEl = document.getElementById('step');
        const timerEl = document.getElementById('timer');
        function setPrompt(i) { instruction.textContent = prompts[i]; stepEl.textContent = i + 1; }
        function tick() {
            seconds--;
            const m = String(Math.floor(seconds / 60)).padStart(2, '0');
            const s = String(seconds % 60).padStart(2, '0');
            timerEl.textContent = m + ":" + s;
            const newIndex = 4 - Math.floor(seconds / 60);
            if (newIndex !== minuteIndex && newIndex >= 0 && newIndex < 5) { minuteIndex = newIndex; setPrompt(minuteIndex); }
            if (seconds <= 0) { location.href = "done.html"; clearInterval(int); }
        }
        setPrompt(0);
        const int = setInterval(tick, 1000);

        // scribble pad
        const c = document.getElementById('pad'), x = c.getContext('2d');
        function fit() { c.width = c.clientWidth; c.height = c.clientHeight; } fit();
        let draw = false, last = [0, 0], sz = 8, ink = '#0b0b0b';
        size.oninput = e => sz = +e.target.value;
        clear.onclick = () => x.clearRect(0, 0, c.width, c.height);
        save.onclick = () => { let a = document.createElement('a'); a.download = 'scribble.png'; a.href = c.toDataURL(); a.click(); };
        const p = e => { const r = c.getBoundingClientRect(); const t = e.touches ? e.touches[0] : e; return [t.clientX - r.left, t.clientY - r.top]; };
        const start = e => { draw = true; last = p(e); e.preventDefault(); };
        const move = e => {
            if (!draw) return;
            const [X, Y] = p(e);
            x.lineCap = 'round'; x.lineJoin = 'round'; x.strokeStyle = ink; x.lineWidth = sz;
            x.beginPath(); x.moveTo(last[0], last[1]); x.lineTo(X, Y); x.stroke();
            last = [X, Y]; e.preventDefault();
        };
        const end = () => draw = false;
        c.addEventListener('mousedown', start); c.addEventListener('mousemove', move); addEventListener('mouseup', end);
        c.addEventListener('touchstart', start, { passive: false }); c.addEventListener('touchmove', move, { passive: false }); addEventListener('touchend', end);
        addEventListener('resize', fit);
    </script>
</body>

</html>